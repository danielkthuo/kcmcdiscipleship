<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Partner Updates - KCMC Partners</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#2ecc71"/>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="KCMC Partners">
    <meta name="description" content="KCMC Partners Ministry Updates">
    
    <!-- PWA Links -->
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/x-icon" href="icons/favicon.ico">
    
    <style>
        :root {
            --primary: #2ecc71;
            --secondary: #3498db;
            --accent: #e74c3c;
            --dark: #2c3e50;
            --light: #f8f9fa;
            --gray: #6c757d;
            --radius: 12px;
            --shadow: 0 2px 15px rgba(0,0,0,0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }

        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
            padding-bottom: 70px; /* Space for bottom nav */
        }

        .container {
            width: 100%;
            padding: 0 15px;
            max-width: 100%;
        }

        /* Header Styles */
        header {
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
            padding: 12px 0;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo-icon {
            font-size: 1.8rem;
        }

        .logo h1 {
            font-size: 1.2rem;
            color: var(--dark);
        }

        /* Mobile Navigation */
        nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            box-shadow: 0 -2px 15px rgba(0,0,0,0.1);
            z-index: 99;
            padding: 8px 0;
        }

        nav ul {
            display: flex;
            justify-content: space-around;
            list-style: none;
        }

        nav ul li a {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: var(--gray);
            font-size: 0.75rem;
            padding: 5px;
            border-radius: var(--radius);
            transition: all 0.3s;
        }

        nav ul li a i {
            font-size: 1.2rem;
            margin-bottom: 3px;
        }

        nav ul li a.active {
            color: var(--primary);
            background: rgba(46, 204, 113, 0.1);
        }

        /* Main Content */
        main {
            padding: 15px 0;
        }

        .page-header {
            text-align: center;
            padding: 20px 15px;
            background: linear-gradient(135deg, var(--secondary), var(--primary));
            color: white;
            border-radius: var(--radius);
            margin-bottom: 20px;
        }

        .page-header h2 {
            font-size: 1.5rem;
            margin-bottom: 8px;
        }

        .page-header p {
            font-size: 0.95rem;
            margin-bottom: 15px;
        }

        .card {
            background: white;
            border-radius: var(--radius);
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: var(--shadow);
        }

        .card h3 {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            color: var(--dark);
            font-size: 1.2rem;
        }

        .card-icon {
            color: var(--primary);
            font-size: 1.2rem;
        }

        .card p {
            margin-bottom: 10px;
            font-size: 0.95rem;
        }

        .grid {
            display: grid;
            gap: 15px;
        }

        .grid-2 {
            grid-template-columns: 1fr;
        }

        .grid-3 {
            grid-template-columns: 1fr;
        }

        /* Child Highlight Styles */
        .child-highlight {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .child-image {
            height: 200px;
            background: var(--light);
            border-radius: var(--radius);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--gray);
            position: relative;
            overflow: hidden;
        }

        .child-image i {
            font-size: 4rem;
        }

        .child-info h4 {
            font-size: 1.3rem;
            margin-bottom: 10px;
            color: var(--dark);
        }

        .child-tags {
            display: flex;
            gap: 8px;
            margin: 1rem 0;
            flex-wrap: wrap;
        }

        .tag {
            background: var(--secondary);
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .tag-primary {
            background: var(--primary);
        }

        /* Story Cards */
        .story-card {
            background: #e8f6f3;
            border-radius: var(--radius);
            padding: 20px;
            margin-bottom: 15px;
            position: relative;
        }

        .story-card h4 {
            font-size: 1.1rem;
            margin-bottom: 10px;
            color: var(--dark);
        }

        .story-card-blue {
            background: #e3f2fd;
        }

        /* Testimony Cards */
        .testimony-card {
            text-align: center;
            padding: 20px 15px;
        }

        .testimony-avatar {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: var(--light);
            margin: 0 auto 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--gray);
        }

        .testimony-avatar i {
            font-size: 1.8rem;
        }

        .testimony-text {
            font-style: italic;
            margin-bottom: 15px;
            position: relative;
        }

        .testimony-text::before {
             content: "‚Äú";
            font-size: 2rem;
            color: var(--primary);
            opacity: 0.3;
            position: absolute;
            top: -10px;
            left: -5px;
        }

        .testimony-name {
            font-weight: bold;
            margin-top: 10px;
        }

        .testimony-details {
            color: var(--gray);
            font-size: 0.85rem;
            margin-top: 5px;
        }

        /* Footer */
        footer {
            background: var(--dark);
            color: white;
            padding: 20px 0;
            text-align: center;
            margin-top: 30px;
        }

        .footer-content {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .footer-links a {
            color: white;
            text-decoration: none;
            font-size: 0.9rem;
        }

        /* New Features */
        .update-date {
            color: var(--gray);
            font-size: 0.85rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .share-btn {
            background: transparent;
            border: 1px solid var(--primary);
            color: var(--primary);
            padding: 6px 12px;
            border-radius: var(--radius);
            font-size: 0.8rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            margin-top: 10px;
            transition: all 0.3s;
        }

        .share-btn:hover {
            background: var(--primary);
            color: white;
        }

        .progress-bar {
            height: 6px;
            background: #e0e0e0;
            border-radius: 3px;
            margin: 10px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--primary);
            border-radius: 3px;
            width: 0%;
            transition: width 1s ease-in-out;
        }

        .impact-stats {
            display: flex;
            justify-content: space-around;
            text-align: center;
            margin: 20px 0;
        }

        .impact-stat {
            flex: 1;
        }

        .impact-number {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary);
        }

        .impact-label {
            font-size: 0.8rem;
            color: var(--gray);
        }

        /* Responsive Adjustments */
        @media (min-width: 768px) {
            .grid-2 {
                grid-template-columns: 1fr 1fr;
            }
            
            .grid-3 {
                grid-template-columns: 1fr 1fr 1fr;
            }
            
            .child-highlight {
                flex-direction: row;
            }
            
            .child-image {
                flex: 0 0 250px;
                height: 250px;
            }
            
            nav {
                position: static;
                background: none;
                box-shadow: none;
                padding: 0;
            }
            
            nav ul {
                justify-content: flex-start;
                gap: 20px;
            }
            
            nav ul li a {
                flex-direction: row;
                font-size: 1rem;
                padding: 8px 15px;
            }
            
            nav ul li a i {
                margin-bottom: 0;
                margin-right: 8px;
            }
            
            body {
                padding-bottom: 0;
            }
        }

        @media (max-width: 480px) {
            .page-header {
                padding: 15px 10px;
            }
            
            .card {
                padding: 15px;
            }
            
            .child-image {
                height: 180px;
            }
            
            .child-image i {
                font-size: 3rem;
            }
            
            .testimony-avatar {
                width: 60px;
                height: 60px;
            }
            
            .testimony-avatar i {
                font-size: 1.5rem;
            }
            
            .impact-stats {
                flex-direction: column;
                gap: 15px;
            }
        }

        /* Animation for cards */
        .card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.15);
        }

        /* Section spacing */
        section {
            margin-bottom: 30px;
        }

        /* Loading animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Notification Styles */
.notification-controls {
  margin-bottom: 20px;
}

.notification-toggle {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 15px;
}

/* Toggle Switch */
.switch {
  position: relative;
  display: inline-block;
  width: 50px;
  height: 24px;
}

.switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

.slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #ccc;
  transition: .4s;
}

.slider:before {
  position: absolute;
  content: "";
  height: 16px;
  width: 16px;
  left: 4px;
  bottom: 4px;
  background-color: white;
  transition: .4s;
}

input:checked + .slider {
  background-color: var(--primary);
}

input:checked + .slider:before {
  transform: translateX(26px);
}

.slider.round {
  border-radius: 34px;
}

.slider.round:before {
  border-radius: 50%;
}

/* Notification List */
.notification-item {
  display: flex;
  align-items: flex-start;
  padding: 15px;
  border-bottom: 1px solid #eee;
  transition: background-color 0.3s;
}

.notification-item:last-child {
  border-bottom: none;
}

.notification-item.unread {
  background-color: rgba(46, 204, 113, 0.05);
}

.notification-icon {
  margin-right: 12px;
  color: var(--primary);
  font-size: 1.2rem;
}

.notification-content {
  flex: 1;
}

.notification-title {
  font-weight: 600;
  margin-bottom: 5px;
  color: var(--dark);
}

.notification-body {
  font-size: 0.9rem;
  color: var(--gray);
  margin-bottom: 8px;
}

.notification-time {
  font-size: 0.8rem;
  color: #aaa;
}

.notification-actions {
  display: flex;
  gap: 10px;
}

.notification-action {
  background: none;
  border: none;
  color: var(--gray);
  cursor: pointer;
  font-size: 0.9rem;
  transition: color 0.3s;
}

.notification-action:hover {
  color: var(--primary);
}

.notification-action.delete:hover {
  color: var(--accent);
}

.empty-notifications {
  text-align: center;
  padding: 30px;
  color: var(--gray);
}

.empty-notifications i {
  font-size: 3rem;
  margin-bottom: 15px;
  opacity: 0.5;
}
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">üïäÔ∏è</div>
                    <h1>KCMC Partners</h1>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        <div class="container">
            <section class="page-header">
                <h2>Partner Updates</h2>
                <p>Stories of transformation, testimonies, and highlights of the children you support</p>
                <div class="impact-stats">
                    <div class="impact-stat">
                        <div class="impact-number">200+</div>
                        <div class="impact-label">Children Supported</div>
                    </div>
                    <div class="impact-stat">
                        <div class="impact-number">All</div>
                        <div class="impact-label">Communities</div>
                    </div>
                    <div class="impact-stat">
                        <div class="impact-number">25</div>
                        <div class="impact-label">Years of Service</div>
                    </div>
                </div>
            </section>

            <!-- Child Highlights -->
            <section class="card">
                <h3><i class="fas fa-star card-icon"></i> Child of the Month</h3>
                <div class="update-date">
                    <i class="far fa-calendar"></i> Updated: December 2025
                </div>
                <div class="child-highlight">
                    <div class="child-image">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="child-info">
    <h4>Denzil, Age 13</h4>
    <div class="child-tags">
        <span class="tag">KCMC Nairobi</span>
        <span class="tag tag-primary">In Program since 2021</span>
    </div>
    <p>Denzil joined the KCMC Nairobi program in 2021 through our discipleship and life skills initiative. At the time, he was shy and often kept to himself. Through mentorship, prayer, and participation in our feeding program, Denzil began to grow in confidence and faith.</p>
    <p>His group leader notes, ‚ÄúDenzil now takes the lead in memory verse recitations and helps organize games for younger children. He has truly become a role model among his peers.‚Äù</p>
    <p>Denzil dreams of becoming a teacher so he can guide and encourage other children to live for Christ and reach their full potential.</p>
    
    <div class="progress-bar">
        <div class="progress-fill" style="width: 70%"></div>
    </div>
    <div style="font-size: 0.85rem; color: var(--gray);">
        70% of Denzil‚Äôs monthly support goal reached
    </div>

    <button class="share-btn" onclick="shareStory('Denzil')">
        <i class="fas fa-share-alt"></i> Share Denzil‚Äôs Story
    </button>
</div>

                </div>
            </section>

            <!-- Success Stories -->
            <section class="card">
  <h3><i class="fas fa-book-open card-icon"></i> Stories of Transformation</h3>
  <div class="update-date">
    <i class="far fa-calendar"></i> Recent Highlights from KCMC Nairobi
  </div>

  <div class="grid grid-2">
    <!-- Story 1 -->
    <div class="story-card">
      <h4>Finding Confidence Through Mentorship</h4>
      <div class="child-tags">
        <span class="tag tag-primary">Nairobi, Kenya</span>
      </div>
      <p>
  Before joining <strong>KCMC Nairobi</strong>, Denzil was a quiet and withdrawn young boy.  
  Through consistent mentorship and discipleship, he began to open up and discovered his gifts and confidence in Christ.  
  Today, Denzil leads prayer sessions during our children‚Äôs fellowship, serves faithfully in the media team, and is passionate about playing the drum set to glorify God.
</p>
<p>
  ‚ÄúKCMC helped me find my voice. I now believe that with God, I can do great things,‚Äù says Denzil with a joyful smile.
</p>
  <button class="share-btn" onclick="shareStory('Denzil')">
        <i class="fas fa-share-alt"></i> Share This Story
      </button>
    </div>

    <!-- Story 2 -->
    <div class="story-card story-card-blue">
      <h4>Nourished in Body and Spirit</h4>
      <div class="child-tags">
        <span class="tag">Mutalia Outreach</span>
      </div>
      <p>
  When <strong>Mary</strong> first came to <strong>KCMC Nairobi</strong>, she struggled with low self-esteem and often kept to herself.  
  Through the life skills and discipleship sessions, she discovered her value in Christ and learned how to express herself with confidence and kindness.  
  Today, Mary helps lead group devotions, mentors younger girls, and uses her story to encourage others to trust in God‚Äôs plan.
</p>
<p>
  ‚ÄúThrough KCMC, I found a family that believes in me and reminds me that I am loved by God,‚Äù says Mary with gratitude.
</p>
 <button class="share-btn" onclick="shareStory('Mary')">
        <i class="fas fa-share-alt"></i> Share This Story
      </button>
    </div>
  </div>
</section>

            <!-- Testimonies -->
            <section class="card">
                <h3><i class="fas fa-quote-left card-icon"></i> Partner Testimonies</h3>
                <div class="update-date">
                    <i class="far fa-calendar"></i> Recent Testimonials
                </div>
                <div class="grid grid-3">
                    
                    <div class="testimony-card">
                        <div class="testimony-avatar">
                            <!--i class="fas fa-user"></i-->
                            <img src="../icons/Rev.png" alt="Reverend" style="width: 100%; height: 100%; border-radius: 50%; object-fit: cover;">
                        </div>
                        <div class="testimony-text">
                            "Seeing children‚Äôs lives transformed through the love of Christ is the true heartbeat of KCMC. Each partnership reminds us that together, we are raising a generation that knows God, walks in purpose, and serves others with compassion."
                        </div>
                        <div class="testimony-name">Senior Bishop John Kimani</div>
                        <div class="testimony-details">Partner since 2006</div>
                    </div>
                    <div class="testimony-card">
                       <div class="testimony-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="testimony-text">
                             "Partnering with KCMC Nairobi has been a blessing. Seeing lives transformed through mentorship, discipleship, and the feeding program encourages me to keep giving and serving faithfully."
                         </div>
                        <div class="testimony-name">Deacon John Gichuki</div>
                        <div class="testimony-details">Partner since 2023</div>
                    </div>

                    <div class="testimony-card">
                        <div class="testimony-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="testimony-text">
                            "I‚Äôm grateful for the transparency and commitment at KCMC Nairobi. Seeing how every contribution touches lives and draws children closer to Christ inspires me to keep partnering in this great work."
                         </div>
                        <div class="testimony-name">Pastor Morry Joh</div>
                        <div class="testimony-details">Partner since 2024</div>
                    </div>

                    <div class="testimony-card">
                        <div class="testimony-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="testimony-text">
                            " "At KCMC, we serve knowing that every resource entrusted to us is a gift from God. Seeing the impact of faithful giving ‚Äî children fed, mentored, and growing in faith ‚Äî reminds me that true ministry is stewardship with love."
  </div>
                        <div class="testimony-name">Senior Pastor Teresa Mwangi</div>
                        <div class="testimony-details">Executive Team Member since 2006</div>
                    </div>
                </div>
            </section>
<!-- Notification Management -->
<section class="card">
  <h3><i class="fas fa-bell card-icon"></i> Notifications</h3>
  
  <div class="notification-controls">
    <div class="notification-toggle">
      <span>Enable Push Notifications</span>
      <label class="switch">
        <input type="checkbox" id="notificationToggle">
        <span class="slider round"></span>
      </label>
    </div>
    
    <button class="btn" id="testNotification" style="margin-top: 10px;">
      <i class="fas fa-bell"></i> Test Notification
    </button>
  </div>
  
  <div class="notification-list" id="notificationList">
    <h4 style="margin: 20px 0 10px;">Recent Notifications</h4>
    <!-- Notifications will be populated here -->
  </div>

</section>
            <!-- Newsletter Signup -->
            <section class="card" style="text-align: center; background: linear-gradient(135deg, var(--secondary), var(--primary)); color: white;">
                <h3>Stay Connected</h3>
                <p style="margin-bottom: 1.5rem;">Get monthly updates delivered directly to your inbox</p>
                <div style="display: flex; gap: 10px; flex-direction: column;">
                    <input type="email" placeholder="Your email address" style="padding: 12px; border-radius: var(--radius); border: none; font-size: 1rem;">
                    <button class="btn" style="background: white; color: var(--dark); border: none; padding: 12px 20px; border-radius: var(--radius); font-weight: 600; cursor: pointer;">
                        Subscribe to Updates
                    </button>
                </div>
            </section>
        </div>
    </main>

    <!-- Bottom Navigation -->
    <nav>
        <ul>
            <li><a href="index.html"><i class="fas fa-home"></i> Home</a></li>
            <li><a href="activities.html"><i class="fas fa-tasks"></i> Activities</a></li>
            <li><a href="budget.html"><i class="fas fa-chart-pie"></i> Budget</a></li>
            <li><a href="updates.html" class="active"><i class="fas fa-newspaper"></i> Updates</a></li>
            <li><a href="contact.html"><i class="fas fa-envelope"></i> Contact</a></li>
        </ul>
    </nav>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <p>&copy; 2023 KCMC Partners. All rights reserved.</p>
                <div class="footer-links">
                    <a href="index.html">Home</a>
                    <a href="activities.html">Activities</a>
                    <a href="budget.html">Budget</a>
                    <a href="updates.html">Updates</a>
                    <a href="contact.html">Contact</a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Add subtle animations when elements come into view
        document.addEventListener('DOMContentLoaded', function() {
            // Create intersection observer for fade-in animations
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };

            const observer = new IntersectionObserver(function(entries) {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                        
                        // Animate progress bars
                        const progressBars = entry.target.querySelectorAll('.progress-fill');
                        progressBars.forEach(bar => {
                            const width = bar.style.width;
                            bar.style.width = '0%';
                            setTimeout(() => {
                                bar.style.width = width;
                            }, 300);
                        });
                    }
                });
            }, observerOptions);

            // Observe all cards for animation
            const cards = document.querySelectorAll('.card');
            cards.forEach(card => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(20px)';
                card.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
                observer.observe(card);
            });

            // Animate impact numbers
            const impactNumbers = document.querySelectorAll('.impact-number');
            impactNumbers.forEach(number => {
                const target = parseInt(number.textContent);
                let current = 0;
                const increment = target / 50;
                const timer = setInterval(() => {
                    current += increment;
                    if (current >= target) {
                        number.textContent = target;
                        clearInterval(timer);
                    } else {
                        number.textContent = Math.floor(current);
                    }
                }, 30);
            });
        });

        // Share story function
        function shareStory(childName) {
            if (navigator.share) {
                navigator.share({
                    title: `${childName}'s Story - KCMC Partners`,
                    text: `Read about ${childName}'s inspiring journey with KCMC Partners`,
                    url: window.location.href,
                })
                .then(() => console.log('Successful share'))
                .catch((error) => console.log('Error sharing:', error));
            } else {
                // Fallback for browsers that don't support Web Share API
                alert(`Share ${childName}'s story with your friends and family!`);
            }
        }

        // Newsletter subscription
        document.addEventListener('DOMContentLoaded', function() {
            const subscribeBtn = document.querySelector('.btn');
            const emailInput = document.querySelector('input[type="email"]');
            
            if (subscribeBtn && emailInput) {
                subscribeBtn.addEventListener('click', function() {
                    const email = emailInput.value;
                    if (email && validateEmail(email)) {
                        // In a real app, you would send this to your server
                        alert('Thank you for subscribing to our updates!');
                        emailInput.value = '';
                    } else {
                        alert('Please enter a valid email address.');
                    }
                });
            }
            
            function validateEmail(email) {
                const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return re.test(email);
            }
        });
        // Notification Management
        // Notification Management System
document.addEventListener('DOMContentLoaded', function() {
  const notificationToggle = document.getElementById('notificationToggle');
  const testNotificationBtn = document.getElementById('testNotification');
  const notificationList = document.getElementById('notificationList');
  
  // Check if notifications are supported
  if (!('Notification' in window)) {
    notificationToggle.disabled = true;
    notificationToggle.parentElement.style.opacity = 0.5;
    return;
  }
  
  // Check current notification permission
  if (Notification.permission === 'granted') {
    notificationToggle.checked = true;
  }
  
  // Load stored notifications
  loadNotifications();
  
  // Toggle notification permission
  notificationToggle.addEventListener('change', function() {
    if (this.checked) {
      requestNotificationPermission();
    } else {
      // Notifications are disabled by browser settings, not by our app
      alert('To disable notifications, please change your browser settings for this site.');
      this.checked = true;
    }
  });
  
  // Test notification button
  testNotificationBtn.addEventListener('click', function() {
    if (Notification.permission === 'granted') {
      showTestNotification();
    } else {
      requestNotificationPermission();
    }
  });
  
  // Request notification permission
  function requestNotificationPermission() {
    Notification.requestPermission().then(function(permission) {
      if (permission === 'granted') {
        console.log('Notification permission granted');
        notificationToggle.checked = true;
        subscribeToPushNotifications();
      } else {
        console.log('Notification permission denied');
        notificationToggle.checked = false;
      }
    });
  }
  
  // Subscribe to push notifications (simulated for this example)
  function subscribeToPushNotifications() {
    // In a real implementation, you would register with a push service here
    console.log('Subscribed to push notifications');
    
    // Store subscription in localStorage
    localStorage.setItem('notificationsEnabled', 'true');
    
    // Add a welcome notification
    addNotification({
      id: Date.now(),
      title: 'Notifications Enabled',
      body: 'You will now receive updates from KCMC Partners',
      timestamp: new Date(),
      read: false
    });
  }
  
  // Show test notification
  function showTestNotification() {
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.ready.then(function(registration) {
        registration.showNotification('Test Notification', {
          body: 'This is a test notification from KCMC Partners',
          icon: '/icons/icon-192x192.png',
          badge: '/icons/badge-72x72.png',
          tag: 'test-notification'
        });
        
        // Add to notification list
        addNotification({
          id: Date.now(),
          title: 'Test Notification',
          body: 'This is a test notification from KCMC Partners',
          timestamp: new Date(),
          read: false
        });
      });
    }
  }
  
  // Load notifications from localStorage
  function loadNotifications() {
    const notifications = JSON.parse(localStorage.getItem('kcmcNotifications') || '[]');
    renderNotifications(notifications);
  }
  
  // Save notifications to localStorage
  function saveNotifications(notifications) {
    localStorage.setItem('kcmcNotifications', JSON.stringify(notifications));
  }
  
  // Add a new notification
  function addNotification(notification) {
    const notifications = JSON.parse(localStorage.getItem('kcmcNotifications') || '[]');
    notifications.unshift(notification);
    saveNotifications(notifications);
    renderNotifications(notifications);
  }
  
  // Render notifications list
  function renderNotifications(notifications) {
    if (notifications.length === 0) {
      notificationList.innerHTML = `
        <div class="empty-notifications">
          <i class="far fa-bell-slash"></i>
          <p>No notifications yet</p>
        </div>
      `;
      return;
    }
    
    let html = '';
    notifications.forEach(notification => {
      const timeAgo = getTimeAgo(notification.timestamp);
      const readClass = notification.read ? '' : 'unread';
      
      html += `
        <div class="notification-item ${readClass}" data-id="${notification.id}">
          <div class="notification-icon">
            <i class="fas fa-bell"></i>
          </div>
          <div class="notification-content">
            <div class="notification-title">${notification.title}</div>
            <div class="notification-body">${notification.body}</div>
            <div class="notification-time">${timeAgo}</div>
          </div>
          <div class="notification-actions">
            ${!notification.read ? `
              <button class="notification-action mark-read" title="Mark as read">
                <i class="fas fa-check"></i>
              </button>
            ` : ''}
            <button class="notification-action delete" title="Delete">
              <i class="fas fa-trash"></i>
            </button>
          </div>
        </div>
      `;
    });
    
    notificationList.innerHTML = html;
    
    // Add event listeners to notification actions
    document.querySelectorAll('.mark-read').forEach(button => {
      button.addEventListener('click', function() {
        const notificationId = this.closest('.notification-item').dataset.id;
        markNotificationAsRead(notificationId);
      });
    });
    
    document.querySelectorAll('.delete').forEach(button => {
      button.addEventListener('click', function() {
        const notificationId = this.closest('.notification-item').dataset.id;
        deleteNotification(notificationId);
      });
    });
  }
  
  // Mark notification as read
  function markNotificationAsRead(id) {
    const notifications = JSON.parse(localStorage.getItem('kcmcNotifications') || '[]');
    const notificationIndex = notifications.findIndex(n => n.id == id);
    
    if (notificationIndex !== -1) {
      notifications[notificationIndex].read = true;
      saveNotifications(notifications);
      renderNotifications(notifications);
    }
  }
  
  // Delete notification
  function deleteNotification(id) {
    const notifications = JSON.parse(localStorage.getItem('kcmcNotifications') || '[]');
    const filteredNotifications = notifications.filter(n => n.id != id);
    saveNotifications(filteredNotifications);
    renderNotifications(filteredNotifications);
  }
  
  // Helper function to format time ago
  function getTimeAgo(timestamp) {
    const now = new Date();
    const date = new Date(timestamp);
    const diffInSeconds = Math.floor((now - date) / 1000);
    
    if (diffInSeconds < 60) {
      return 'Just now';
    } else if (diffInSeconds < 3600) {
      const minutes = Math.floor(diffInSeconds / 60);
      return `${minutes} minute${minutes > 1 ? 's' : ''} ago`;
    } else if (diffInSeconds < 86400) {
      const hours = Math.floor(diffInSeconds / 3600);
      return `${hours} hour${hours > 1 ? 's' : ''} ago`;
    } else if (diffInSeconds < 604800) {
      const days = Math.floor(diffInSeconds / 86400);
      return `${days} day${days > 1 ? 's' : ''} ago`;
    } else {
      return date.toLocaleDateString();
    }
  }
  
  // Simulate receiving notifications (for demo purposes)
  // In a real app, these would come from your server via push notifications
  setTimeout(() => {
    if (Notification.permission === 'granted') {
      addNotification({
        id: Date.now(),
        title: 'Welcome to KCMC Partners',
        body: 'Thank you for joining our community. Stay tuned for updates!',
        timestamp: new Date(),
        read: false
      });
    }
  }, 2000);
});
    </script>
</body>
</html>