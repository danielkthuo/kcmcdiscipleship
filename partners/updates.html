<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Partner Updates - KCMC Partners</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#2ecc71"/>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="KCMC Partners">
    <meta name="description" content="KCMC Partners Ministry Updates">
    
    <!-- PWA Links -->
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/x-icon" href="icons/favicon.ico">
    
    <style>
        :root {
            --primary: #2ecc71;
            --secondary: #3498db;
            --accent: #e74c3c;
            --dark: #2c3e50;
            --light: #f8f9fa;
            --gray: #6c757d;
            --radius: 12px;
            --shadow: 0 2px 15px rgba(0,0,0,0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }

        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
            padding-bottom: 70px; /* Space for bottom nav */
        }

        .container {
            width: 100%;
            padding: 0 15px;
            max-width: 100%;
        }

        /* Header Styles */
        header {
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
            padding: 12px 0;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo-icon {
            font-size: 1.8rem;
        }

        .logo h1 {
            font-size: 1.2rem;
            color: var(--dark);
        }

        /* Mobile Navigation */
        nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            box-shadow: 0 -2px 15px rgba(0,0,0,0.1);
            z-index: 99;
            padding: 8px 0;
        }

        nav ul {
            display: flex;
            justify-content: space-around;
            list-style: none;
        }

        nav ul li a {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: var(--gray);
            font-size: 0.75rem;
            padding: 5px;
            border-radius: var(--radius);
            transition: all 0.3s;
        }

        nav ul li a i {
            font-size: 1.2rem;
            margin-bottom: 3px;
        }

        nav ul li a.active {
            color: var(--primary);
            background: rgba(46, 204, 113, 0.1);
        }

        /* Main Content */
        main {
            padding: 15px 0;
        }

        .page-header {
            text-align: center;
            padding: 20px 15px;
            background: linear-gradient(135deg, var(--secondary), var(--primary));
            color: white;
            border-radius: var(--radius);
            margin-bottom: 20px;
        }

        .page-header h2 {
            font-size: 1.5rem;
            margin-bottom: 8px;
        }

        .page-header p {
            font-size: 0.95rem;
            margin-bottom: 15px;
        }

        .card {
            background: white;
            border-radius: var(--radius);
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: var(--shadow);
        }

        .card h3 {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            color: var(--dark);
            font-size: 1.2rem;
        }

        .card-icon {
            color: var(--primary);
            font-size: 1.2rem;
        }

        .card p {
            margin-bottom: 10px;
            font-size: 0.95rem;
        }

        .grid {
            display: grid;
            gap: 15px;
        }

        .grid-2 {
            grid-template-columns: 1fr;
        }

        .grid-3 {
            grid-template-columns: 1fr;
        }

        /* Child Highlight Styles */
        .child-highlight {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .child-image {
            height: 200px;
            background: var(--light);
            border-radius: var(--radius);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--gray);
            position: relative;
            overflow: hidden;
        }

        .child-image i {
            font-size: 4rem;
        }

        .child-info h4 {
            font-size: 1.3rem;
            margin-bottom: 10px;
            color: var(--dark);
        }

        .child-tags {
            display: flex;
            gap: 8px;
            margin: 1rem 0;
            flex-wrap: wrap;
        }

        .tag {
            background: var(--secondary);
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .tag-primary {
            background: var(--primary);
        }

        /* Story Cards */
        .story-card {
            background: #e8f6f3;
            border-radius: var(--radius);
            padding: 20px;
            margin-bottom: 15px;
            position: relative;
        }

        .story-card h4 {
            font-size: 1.1rem;
            margin-bottom: 10px;
            color: var(--dark);
        }

        .story-card-blue {
            background: #e3f2fd;
        }

        /* Testimony Cards */
        .testimony-card {
            text-align: center;
            padding: 20px 15px;
        }

        .testimony-avatar {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: var(--light);
            margin: 0 auto 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--gray);
        }

        .testimony-avatar i {
            font-size: 1.8rem;
        }

        .testimony-text {
            font-style: italic;
            margin-bottom: 15px;
            position: relative;
        }

        .testimony-text::before {
             content: "‚Äú";
            font-size: 2rem;
            color: var(--primary);
            opacity: 0.3;
            position: absolute;
            top: -10px;
            left: -5px;
        }

        .testimony-name {
            font-weight: bold;
            margin-top: 10px;
        }

        .testimony-details {
            color: var(--gray);
            font-size: 0.85rem;
            margin-top: 5px;
        }

        /* Footer */
        footer {
            background: var(--dark);
            color: white;
            padding: 20px 0;
            text-align: center;
            margin-top: 30px;
        }

        .footer-content {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .footer-links a {
            color: white;
            text-decoration: none;
            font-size: 0.9rem;
        }

        /* New Features */
        .update-date {
            color: var(--gray);
            font-size: 0.85rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .share-btn {
            background: transparent;
            border: 1px solid var(--primary);
            color: var(--primary);
            padding: 6px 12px;
            border-radius: var(--radius);
            font-size: 0.8rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            margin-top: 10px;
            transition: all 0.3s;
        }

        .share-btn:hover {
            background: var(--primary);
            color: white;
        }

        .progress-bar {
            height: 6px;
            background: #e0e0e0;
            border-radius: 3px;
            margin: 10px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--primary);
            border-radius: 3px;
            width: 0%;
            transition: width 1s ease-in-out;
        }

        .impact-stats {
            display: flex;
            justify-content: space-around;
            text-align: center;
            margin: 20px 0;
        }

        .impact-stat {
            flex: 1;
        }

        .impact-number {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary);
        }

        .impact-label {
            font-size: 0.8rem;
            color: var(--gray);
        }

        /* Responsive Adjustments */
        @media (min-width: 768px) {
            .grid-2 {
                grid-template-columns: 1fr 1fr;
            }
            
            .grid-3 {
                grid-template-columns: 1fr 1fr 1fr;
            }
            
            .child-highlight {
                flex-direction: row;
            }
            
            .child-image {
                flex: 0 0 250px;
                height: 250px;
            }
            
            nav {
                position: static;
                background: none;
                box-shadow: none;
                padding: 0;
            }
            
            nav ul {
                justify-content: flex-start;
                gap: 20px;
            }
            
            nav ul li a {
                flex-direction: row;
                font-size: 1rem;
                padding: 8px 15px;
            }
            
            nav ul li a i {
                margin-bottom: 0;
                margin-right: 8px;
            }
            
            body {
                padding-bottom: 0;
            }
        }

        @media (max-width: 480px) {
            .page-header {
                padding: 15px 10px;
            }
            
            .card {
                padding: 15px;
            }
            
            .child-image {
                height: 180px;
            }
            
            .child-image i {
                font-size: 3rem;
            }
            
            .testimony-avatar {
                width: 60px;
                height: 60px;
            }
            
            .testimony-avatar i {
                font-size: 1.5rem;
            }
            
            .impact-stats {
                flex-direction: column;
                gap: 15px;
            }
        }

        /* Animation for cards */
        .card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.15);
        }

        /* Section spacing */
        section {
            margin-bottom: 30px;
        }

        /* Loading animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        /* Notification Styles */
.header-actions {
    display: flex;
    align-items: center;
}

.notification-container {
    position: relative;
}

.notification-bell {
    background: none;
    border: none;
    font-size: 1.2rem;
    color: var(--dark);
    cursor: pointer;
    padding: 8px;
    border-radius: 50%;
    transition: all 0.3s;
    position: relative;
}

.notification-bell:hover {
    background: rgba(46, 204, 113, 0.1);
    color: var(--primary);
}

.notification-badge {
    position: absolute;
    top: 0;
    right: 0;
    background: var(--accent);
    color: white;
    border-radius: 50%;
    width: 18px;
    height: 18px;
    font-size: 0.7rem;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
}

.notification-panel {
    position: absolute;
    top: 100%;
    right: 0;
    width: 320px;
    background: white;
    border-radius: var(--radius);
    box-shadow: 0 4px 20px rgba(0,0,0,0.15);
    z-index: 1000;
    display: none;
    margin-top: 10px;
}

.notification-panel.show {
    display: block;
    animation: slideDown 0.3s ease;
}

@keyframes slideDown {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.notification-header {
    padding: 15px;
    border-bottom: 1px solid #eee;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.notification-header h4 {
    margin: 0;
    color: var(--dark);
    font-size: 1rem;
}

.btn-link {
    background: none;
    border: none;
    color: var(--secondary);
    cursor: pointer;
    font-size: 0.85rem;
    text-decoration: underline;
}

.btn-link:hover {
    color: var(--primary);
}

.notification-list {
    max-height: 300px;
    overflow-y: auto;
}

.notification-item {
    padding: 12px 15px;
    border-bottom: 1px solid #f0f0f0;
    cursor: pointer;
    transition: background-color 0.3s;
    display: flex;
    align-items: flex-start;
    gap: 10px;
}

.notification-item:last-child {
    border-bottom: none;
}

.notification-item.unread {
    background-color: rgba(46, 204, 113, 0.05);
}

.notification-item:hover {
    background-color: #f8f9fa;
}

.notification-icon {
    color: var(--primary);
    font-size: 0.9rem;
    margin-top: 2px;
}

.notification-content {
    flex: 1;
}

.notification-title {
    font-weight: 600;
    font-size: 0.9rem;
    margin-bottom: 4px;
    color: var(--dark);
}

.notification-body {
    font-size: 0.85rem;
    color: var(--gray);
    margin-bottom: 4px;
    line-height: 1.4;
}

.notification-time {
    font-size: 0.75rem;
    color: #999;
}

.notification-footer {
    padding: 12px 15px;
    border-top: 1px solid #eee;
    text-align: center;
}

.empty-notifications {
    padding: 30px 20px;
    text-align: center;
    color: var(--gray);
}

.empty-notifications i {
    font-size: 2rem;
    margin-bottom: 10px;
    opacity: 0.5;
}

/* Notification Management Page Styles */
.notification-management {
    margin-top: 20px;
}

.notification-filters {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
    flex-wrap: wrap;
}

.filter-btn {
    padding: 8px 16px;
    border: 1px solid #ddd;
    background: white;
    border-radius: var(--radius);
    cursor: pointer;
    font-size: 0.85rem;
    transition: all 0.3s;
}

.filter-btn.active {
    background: var(--primary);
    color: white;
    border-color: var(--primary);
}

.notification-actions {
    display: flex;
    gap: 5px;
}

.notification-action {
    background: none;
    border: none;
    color: var(--gray);
    cursor: pointer;
    font-size: 0.8rem;
    padding: 4px 8px;
    border-radius: 4px;
    transition: all 0.3s;
}

.notification-action:hover {
    background: #f8f9fa;
}

.notification-action.delete:hover {
    color: var(--accent);
}

/* Mobile Responsive */
@media (max-width: 480px) {
    .notification-panel {
        width: 280px;
        right: -50px;
    }
}
/* Toggle Switch Styles */
.notification-toggle {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
    padding: 10px;
    background: #f8f9fa;
    border-radius: var(--radius);
}

.switch {
    position: relative;
    display: inline-block;
    width: 50px;
    height: 24px;
}

.switch input {
    opacity: 0;
    width: 0;
    height: 0;
}

.slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #ccc;
    transition: .4s;
}

.slider:before {
    position: absolute;
    content: "";
    height: 16px;
    width: 16px;
    left: 4px;
    bottom: 4px;
    background-color: white;
    transition: .4s;
}

input:checked + .slider {
    background-color: var(--primary);
}

input:checked + .slider:before {
    transform: translateX(26px);
}

.slider.round {
    border-radius: 34px;
}

.slider.round:before {
    border-radius: 50%;
}

/* Button styles for test notification */
.btn {
    background: var(--secondary);
    color: white;
    border: none;
    padding: 10px 15px;
    border-radius: var(--radius);
    cursor: pointer;
    font-size: 0.9rem;
    transition: all 0.3s;
}

.btn:hover {
    background: #2980b9;
    transform: translateY(-1px);
}
    </style>
</head>
<body>
    <!-- Header -->
    <!-- Updated Header -->
<header>
    <div class="container">
        <div class="header-content">
            <div class="logo">
                <div class="logo-icon">üïäÔ∏è</div>
                <h1>KCMC Partners</h1>
            </div>
            <div class="header-actions">
                <!-- Notification Bell -->
                <div class="notification-container">
                    <button id="notificationBell" class="notification-bell">
                        <i class="fas fa-bell"></i>
                        <span id="notificationCount" class="notification-badge" style="display: none;">0</span>
                    </button>
                    <div id="notificationPanel" class="notification-panel">
                        <div class="notification-header">
                            <h4>Notifications</h4>
                            <button id="markAllRead" class="btn-link">Mark all read</button>
                        </div>
                        <div id="notificationList" class="notification-list">
                            <!-- Notifications will be populated here -->
                        </div>
                        <div class="notification-footer">
                            <button id="viewAllNotifications" class="btn-link">View all notifications</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>

    <!-- Main Content -->
    <main>
        <div class="container">
            <section class="page-header">
                <h2>Partner Updates</h2>
                <p>Stories of transformation, testimonies, and highlights of the children you support</p>
                <div class="impact-stats">
                    <div class="impact-stat">
                        <div class="impact-number">200+</div>
                        <div class="impact-label">Children Supported</div>
                    </div>
                    <div class="impact-stat">
                        <div class="impact-number">All</div>
                        <div class="impact-label">Communities</div>
                    </div>
                    <div class="impact-stat">
                        <div class="impact-number">25</div>
                        <div class="impact-label">Years of Service</div>
                    </div>
                </div>
            </section>

            <!-- Child Highlights -->
            <section class="card">
                <h3><i class="fas fa-star card-icon"></i> Child of the Month</h3>
                <div class="update-date">
                    <i class="far fa-calendar"></i> Updated: December 2025
                </div>
                <div class="child-highlight">
                    <div class="child-image">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="child-info">
    <h4>Denzil, Age 13</h4>
    <div class="child-tags">
        <span class="tag">KCMC Nairobi</span>
        <span class="tag tag-primary">In Program since 2021</span>
    </div>
    <p>Denzil joined the KCMC Nairobi program in 2021 through our discipleship and life skills initiative. At the time, he was shy and often kept to himself. Through mentorship, prayer, and participation in our feeding program, Denzil began to grow in confidence and faith.</p>
    <p>His group leader notes, ‚ÄúDenzil now takes the lead in memory verse recitations and helps organize games for younger children. He has truly become a role model among his peers.‚Äù</p>
    <p>Denzil dreams of becoming a teacher so he can guide and encourage other children to live for Christ and reach their full potential.</p>
    
    <div class="progress-bar">
        <div class="progress-fill" style="width: 70%"></div>
    </div>
    <div style="font-size: 0.85rem; color: var(--gray);">
        70% of Denzil‚Äôs monthly support goal reached
    </div>

    <button class="share-btn" onclick="shareStory('Denzil')">
        <i class="fas fa-share-alt"></i> Share Denzil‚Äôs Story
    </button>
</div>

                </div>
            </section>

            <!-- Success Stories -->
            <section class="card">
  <h3><i class="fas fa-book-open card-icon"></i> Stories of Transformation</h3>
  <div class="update-date">
    <i class="far fa-calendar"></i> Recent Highlights from KCMC Nairobi
  </div>

  <div class="grid grid-2">
    <!-- Story 1 -->
    <div class="story-card">
      <h4>Finding Confidence Through Mentorship</h4>
      <div class="child-tags">
        <span class="tag tag-primary">Nairobi, Kenya</span>
      </div>
      <p>
  Before joining <strong>KCMC Nairobi</strong>, Denzil was a quiet and withdrawn young boy.  
  Through consistent mentorship and discipleship, he began to open up and discovered his gifts and confidence in Christ.  
  Today, Denzil leads prayer sessions during our children‚Äôs fellowship, serves faithfully in the media team, and is passionate about playing the drum set to glorify God.
</p>
<p>
  ‚ÄúKCMC helped me find my voice. I now believe that with God, I can do great things,‚Äù says Denzil with a joyful smile.
</p>
  <button class="share-btn" onclick="shareStory('Denzil')">
        <i class="fas fa-share-alt"></i> Share This Story
      </button>
    </div>

    <!-- Story 2 -->
    <div class="story-card story-card-blue">
      <h4>Nourished in Body and Spirit</h4>
      <div class="child-tags">
        <span class="tag">Mutalia Outreach</span>
      </div>
      <p>
  When <strong>Mary</strong> first came to <strong>KCMC Nairobi</strong>, she struggled with low self-esteem and often kept to herself.  
  Through the life skills and discipleship sessions, she discovered her value in Christ and learned how to express herself with confidence and kindness.  
  Today, Mary helps lead group devotions, mentors younger girls, and uses her story to encourage others to trust in God‚Äôs plan.
</p>
<p>
  ‚ÄúThrough KCMC, I found a family that believes in me and reminds me that I am loved by God,‚Äù says Mary with gratitude.
</p>
 <button class="share-btn" onclick="shareStory('Mary')">
        <i class="fas fa-share-alt"></i> Share This Story
      </button>
    </div>
  </div>
</section>

            <!-- Testimonies -->
            <section class="card">
                <h3><i class="fas fa-quote-left card-icon"></i> Partner Testimonies</h3>
                <div class="update-date">
                    <i class="far fa-calendar"></i> Recent Testimonials
                </div>
                <div class="grid grid-3">
                    
                    <div class="testimony-card">
                        <div class="testimony-avatar">
                            <!--i class="fas fa-user"></i-->
                            <img src="../icons/Rev.png" alt="Reverend" style="width: 100%; height: 100%; border-radius: 50%; object-fit: cover;">
                        </div>
                        <div class="testimony-text">
                            "Seeing children‚Äôs lives transformed through the love of Christ is the true heartbeat of KCMC. Each partnership reminds us that together, we are raising a generation that knows God, walks in purpose, and serves others with compassion."
                        </div>
                        <div class="testimony-name">Senior Bishop John Kimani</div>
                        <div class="testimony-details">Partner since 2006</div>
                    </div>
                    <div class="testimony-card">
                       <div class="testimony-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="testimony-text">
                             "Partnering with KCMC Nairobi has been a blessing. Seeing lives transformed through mentorship, discipleship, and the feeding program encourages me to keep giving and serving faithfully."
                         </div>
                        <div class="testimony-name">Deacon John Gichuki</div>
                        <div class="testimony-details">Partner since 2023</div>
                    </div>

                    <div class="testimony-card">
                        <div class="testimony-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="testimony-text">
                            "I‚Äôm grateful for the transparency and commitment at KCMC Nairobi. Seeing how every contribution touches lives and draws children closer to Christ inspires me to keep partnering in this great work."
                         </div>
                        <div class="testimony-name">Pastor Morry Joh</div>
                        <div class="testimony-details">Partner since 2024</div>
                    </div>

                    <div class="testimony-card">
                        <div class="testimony-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="testimony-text">
                            " "At KCMC, we serve knowing that every resource entrusted to us is a gift from God. Seeing the impact of faithful giving ‚Äî children fed, mentored, and growing in faith ‚Äî reminds me that true ministry is stewardship with love."
  </div>
                        <div class="testimony-name">Senior Pastor Teresa Mwangi</div>
                        <div class="testimony-details">Executive Team Member since 2006</div>
                    </div>
                </div>
            </section>
<!-- Notification Management -->
<section class="card notification-management">
    <h3><i class="fas fa-bell card-icon"></i> Notification Center</h3>
    
    <div class="notification-controls">
        <div class="notification-toggle">
            <span>Enable Push Notifications</span>
            <label class="switch">
                <input type="checkbox" id="notificationToggle">
                <span class="slider round"></span>
            </label>
        </div>
        
        <button class="btn" id="testNotification" style="margin-top: 10px;">
            <i class="fas fa-bell"></i> Test Notification
        </button>
    </div>
    
    <div class="notification-filters">
        <button class="filter-btn active" data-filter="all">All</button>
        <button class="filter-btn" data-filter="unread">Unread</button>
        <button class="filter-btn" data-filter="read">Read</button>
    </div>
    
    <div id="notificationListFull" class="notification-list-full">
        <!-- Full notification list will be populated here -->
    </div>
</section>
            <!-- Newsletter Signup -->
            <section class="card" style="text-align: center; background: linear-gradient(135deg, var(--secondary), var(--primary)); color: white;">
                <h3>Stay Connected</h3>
                <p style="margin-bottom: 1.5rem;">Get monthly updates delivered directly to your inbox</p>
                <div style="display: flex; gap: 10px; flex-direction: column;">
                    <input type="email" placeholder="Your email address" style="padding: 12px; border-radius: var(--radius); border: none; font-size: 1rem;">
                    <button class="btn" style="background: white; color: var(--dark); border: none; padding: 12px 20px; border-radius: var(--radius); font-weight: 600; cursor: pointer;">
                        Subscribe to Updates
                    </button>
                </div>
            </section>
        </div>
    </main>

    <!-- Bottom Navigation -->
    <nav>
        <ul>
            <li><a href="index.html"><i class="fas fa-home"></i> Home</a></li>
            <li><a href="activities.html"><i class="fas fa-tasks"></i> Activities</a></li>
            <li><a href="budget.html"><i class="fas fa-chart-pie"></i> Budget</a></li>
            <li><a href="updates.html" class="active"><i class="fas fa-newspaper"></i> Updates</a></li>
            <li><a href="contact.html"><i class="fas fa-envelope"></i> Contact</a></li>
        </ul>
    </nav>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <p>&copy; 2023 KCMC Partners. All rights reserved.</p>
                <div class="footer-links">
                    <a href="index.html">Home</a>
                    <a href="activities.html">Activities</a>
                    <a href="budget.html">Budget</a>
                    <a href="updates.html">Updates</a>
                    <a href="contact.html">Contact</a>
                </div>
            </div>
        </div>
    </footer>

       <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDfNX8WUWfUAN-dIUtzq8gJXjh0CIZdS_0",
            authDomain: "kcmcpartners.firebaseapp.com",
            projectId: "kcmcpartners",
            storageBucket: "kcmcpartners.firebasestorage.app",
            messagingSenderId: "30984885444",
            appId: "1:30984885444:web:0be4febff8cfef1b22a591",
            measurementId: "G-Z6FMF6Z1V1"
        };

        // Initialize Firebase
        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
        }

        const auth = firebase.auth();
        const db = firebase.firestore();

        // Notification Management System
        class NotificationManager {
            constructor() {
                this.db = db;
                this.auth = auth;
                this.userId = null;
                this.notifications = [];
                this.init();
            }

         // Replace the current init method with this:
async init() {
    return new Promise((resolve) => {
        this.auth.onAuthStateChanged(async (user) => {
            if (user) {
                this.userId = user.uid;
                console.log('User authenticated:', this.userId);
                await this.loadNotifications();
                this.setupRealTimeListener();
                this.setupUI();
                this.checkNotificationPermission();
                resolve(true);
            } else {
                console.log('No user signed in');
                // Redirect to login or show sign-in
                this.showLoginPrompt();
                resolve(false);
            }
        });
    });
}

showLoginPrompt() {
    // You can redirect to login page or show a modal
    console.log('Please sign in to view notifications');
}

            // Check notification permission
            checkNotificationPermission() {
                if (!('Notification' in window)) {
                    console.log('This browser does not support notifications');
                    return;
                }

                if (Notification.permission === 'granted') {
                    document.getElementById('notificationToggle').checked = true;
                    this.subscribeToPushNotifications();
                } else if (Notification.permission === 'default') {
                    // Permission not yet requested
                    document.getElementById('notificationToggle').checked = false;
                } else {
                    document.getElementById('notificationToggle').checked = false;
                }
            }

            // Subscribe to push notifications
            async subscribeToPushNotifications() {
                if ('serviceWorker' in navigator) {
                    try {
                        const registration = await navigator.serviceWorker.ready;
                        console.log('Service Worker ready for push notifications');
                        
                        // Store subscription in Firestore
                        if (this.userId) {
                            await this.db.collection('userPushSubscriptions').doc(this.userId).set({
                                userId: this.userId,
                                subscribed: true,
                                subscribedAt: firebase.firestore.FieldValue.serverTimestamp()
                            }, { merge: true });
                        }
                    } catch (error) {
                        console.error('Error subscribing to push notifications:', error);
                    }
                }
            }

            // Load notifications from Firestore
            async loadNotifications() {
                if (!this.userId) {
                    console.log('No user ID available');
                    return;
                }

                try {
                    console.log('Loading notifications for user:', this.userId);
                    const snapshot = await this.db.collection('userMessages')
                        .where('recipientId', '==', this.userId)
                        .orderBy('timestamp', 'desc')
                        .limit(50)
                        .get();

                    this.notifications = snapshot.docs.map(doc => ({
                        id: doc.id,
                        ...doc.data()
                    }));

                    console.log('Loaded notifications:', this.notifications.length);
                    this.renderNotifications();
                    this.updateNotificationBadge();
                } catch (error) {
                    console.error('Error loading notifications:', error);
                }
            }

            // Setup real-time listener for new notifications
            setupRealTimeListener() {
                if (!this.userId) return;

                console.log('Setting up real-time listener for user:', this.userId);
                
                this.db.collection('userMessages')
                    .where('recipientId', '==', this.userId)
                    .orderBy('timestamp', 'desc')
                    .limit(1)
                    .onSnapshot((snapshot) => {
                        snapshot.docChanges().forEach((change) => {
                            if (change.type === 'added') {
                                console.log('New notification received:', change.doc.data());
                                const newNotification = {
                                    id: change.doc.id,
                                    ...change.doc.data()
                                };
                                
                                // Show push notification if enabled
                                if (Notification.permission === 'granted') {
                                    this.showPushNotification(newNotification);
                                }
                                
                                // Reload notifications to update UI
                                this.loadNotifications();
                            }
                        });
                    }, (error) => {
                        console.error('Error in real-time listener:', error);
                    });
            }

            // Show push notification
            showPushNotification(notification) {
                if (Notification.permission === 'granted' && 'serviceWorker' in navigator) {
                    navigator.serviceWorker.ready.then(registration => {
                        registration.showNotification(notification.title || 'KCMC Partners', {
                            body: notification.body,
                            icon: '/icons/icon-192x192.png',
                            badge: '/icons/badge-72x72.png',
                            tag: 'kcmc-notification',
                            data: {
                                url: window.location.href,
                                notificationId: notification.id
                            },
                            actions: [
                                {
                                    action: 'view',
                                    title: 'View'
                                },
                                {
                                    action: 'dismiss',
                                    title: 'Dismiss'
                                }
                            ]
                        });
                    });
                }
            }

            // Setup UI event listeners
            setupUI() {
                // Notification bell click
                const notificationBell = document.getElementById('notificationBell');
                if (notificationBell) {
                    notificationBell.addEventListener('click', (e) => {
                        e.stopPropagation();
                        this.toggleNotificationPanel();
                    });
                }

                // Mark all as read
                const markAllRead = document.getElementById('markAllRead');
                if (markAllRead) {
                    markAllRead.addEventListener('click', () => {
                        this.markAllAsRead();
                    });
                }

                // View all notifications
                const viewAllNotifications = document.getElementById('viewAllNotifications');
                if (viewAllNotifications) {
                    viewAllNotifications.addEventListener('click', () => {
                        this.showFullNotificationList();
                    });
                }

                // Test notification button
                const testNotification = document.getElementById('testNotification');
                if (testNotification) {
                    testNotification.addEventListener('click', () => {
                        this.sendTestNotification();
                    });
                }

                // Notification toggle
                const notificationToggle = document.getElementById('notificationToggle');
                if (notificationToggle) {
                    notificationToggle.addEventListener('change', (e) => {
                        this.toggleNotifications(e.target.checked);
                    });
                }

                // Filter buttons
                document.querySelectorAll('.filter-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        this.filterNotifications(e.target.dataset.filter);
                    });
                });

                // Close notification panel when clicking outside
                document.addEventListener('click', () => {
                    this.hideNotificationPanel();
                });
            }

            // Toggle notification panel
            toggleNotificationPanel() {
                const panel = document.getElementById('notificationPanel');
                if (panel) {
                    panel.classList.toggle('show');
                }
            }

            // Hide notification panel
            hideNotificationPanel() {
                const panel = document.getElementById('notificationPanel');
                if (panel) {
                    panel.classList.remove('show');
                }
            }

            // Render notifications in panel
            renderNotifications() {
                const panelList = document.getElementById('notificationList');
                const fullList = document.getElementById('notificationListFull');
                
                if (!panelList || !fullList) return;

                const unreadNotifications = this.notifications.filter(n => !n.read).slice(0, 5);
                
                // Render panel (recent unread)
                if (unreadNotifications.length === 0) {
                    panelList.innerHTML = `
                        <div class="empty-notifications">
                            <i class="far fa-bell"></i>
                            <p>No new notifications</p>
                        </div>
                    `;
                } else {
                    panelList.innerHTML = unreadNotifications.map(notification => 
                        this.renderNotificationItem(notification, true)
                    ).join('');
                }

                // Render full list
                if (this.notifications.length === 0) {
                    fullList.innerHTML = `
                        <div class="empty-notifications">
                            <i class="far fa-bell"></i>
                            <p>No notifications yet</p>
                        </div>
                    `;
                } else {
                    fullList.innerHTML = this.notifications.map(notification => 
                        this.renderNotificationItem(notification, false)
                    ).join('');
                }

                // Add event listeners to notification items
                this.addNotificationItemListeners();
            }

            // Render single notification item
            renderNotificationItem(notification, isPanel) {
                const timeAgo = this.getTimeAgo(notification.timestamp);
                const unreadClass = !notification.read ? 'unread' : '';
                const icon = notification.type === 'urgent' ? 'exclamation-circle' : 
                            notification.type === 'admin_message' ? 'user-shield' : 'info-circle';
                
                return `
                    <div class="notification-item ${unreadClass}" data-id="${notification.id}">
                        <div class="notification-icon">
                            <i class="fas fa-${icon}"></i>
                        </div>
                        <div class="notification-content">
                            <div class="notification-title">${notification.title || 'Notification'}</div>
                            <div class="notification-body">${notification.body || 'No content'}</div>
                            <div class="notification-time">${timeAgo}</div>
                        </div>
                        ${!isPanel ? `
                            <div class="notification-actions">
                                ${!notification.read ? `
                                    <button class="notification-action mark-read" title="Mark as read">
                                        <i class="fas fa-check"></i>
                                    </button>
                                ` : ''}
                                <button class="notification-action delete" title="Delete">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        ` : ''}
                    </div>
                `;
            }

            // Add event listeners to notification items
            addNotificationItemListeners() {
                // Mark as read
                document.querySelectorAll('.mark-read').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        const notificationId = e.target.closest('.notification-item').dataset.id;
                        this.markAsRead(notificationId);
                    });
                });

                // Delete notification
                document.querySelectorAll('.notification-action.delete').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        const notificationId = e.target.closest('.notification-item').dataset.id;
                        this.deleteNotification(notificationId);
                    });
                });

                // Click notification
                document.querySelectorAll('.notification-item').forEach(item => {
                    item.addEventListener('click', () => {
                        const notificationId = item.dataset.id;
                        this.markAsRead(notificationId);
                    });
                });
            }

            // Update notification badge
            updateNotificationBadge() {
                const unreadCount = this.notifications.filter(n => !n.read).length;
                const badge = document.getElementById('notificationCount');
                
                if (badge) {
                    if (unreadCount > 0) {
                        badge.textContent = unreadCount > 99 ? '99+' : unreadCount;
                        badge.style.display = 'flex';
                    } else {
                        badge.style.display = 'none';
                    }
                }
            }

            // Mark notification as read
            async markAsRead(notificationId) {
                try {
                    await this.db.collection('userMessages').doc(notificationId).update({
                        read: true,
                        readAt: firebase.firestore.FieldValue.serverTimestamp()
                    });
                    
                    // Update local state
                    const notification = this.notifications.find(n => n.id === notificationId);
                    if (notification) {
                        notification.read = true;
                    }
                    
                    this.renderNotifications();
                    this.updateNotificationBadge();
                } catch (error) {
                    console.error('Error marking notification as read:', error);
                }
            }

            // Mark all as read
            async markAllAsRead() {
                try {
                    const unreadNotifications = this.notifications.filter(n => !n.read);
                    const batch = this.db.batch();
                    
                    unreadNotifications.forEach(notification => {
                        const ref = this.db.collection('userMessages').doc(notification.id);
                        batch.update(ref, {
                            read: true,
                            readAt: firebase.firestore.FieldValue.serverTimestamp()
                        });
                    });
                    
                    await batch.commit();
                    
                    // Update local state
                    this.notifications.forEach(notification => {
                        notification.read = true;
                    });
                    
                    this.renderNotifications();
                    this.updateNotificationBadge();
                    this.hideNotificationPanel();
                    
                    alert('All notifications marked as read');
                } catch (error) {
                    console.error('Error marking all as read:', error);
                    alert('Error marking notifications as read');
                }
            }

            // Delete notification
            async deleteNotification(notificationId) {
                if (!confirm('Are you sure you want to delete this notification?')) {
                    return;
                }
                
                try {
                    await this.db.collection('userMessages').doc(notificationId).delete();
                    
                    // Remove from local state
                    this.notifications = this.notifications.filter(n => n.id !== notificationId);
                    
                    this.renderNotifications();
                    this.updateNotificationBadge();
                } catch (error) {
                    console.error('Error deleting notification:', error);
                    alert('Error deleting notification');
                }
            }

            // Filter notifications
            filterNotifications(filter) {
                // Update active filter button
                document.querySelectorAll('.filter-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                document.querySelector(`[data-filter="${filter}"]`).classList.add('active');
                
                // For now, we'll just reload all notifications
                // In a full implementation, you would filter the existing notifications array
                this.loadNotifications();
            }

            // Show full notification list
            showFullNotificationList() {
                // Scroll to notification management section
                const notificationSection = document.querySelector('.notification-management');
                if (notificationSection) {
                    notificationSection.scrollIntoView({
                        behavior: 'smooth'
                    });
                }
                this.hideNotificationPanel();
            }

            // Toggle notifications
            async toggleNotifications(enabled) {
                if (enabled) {
                    const permission = await Notification.requestPermission();
                    if (permission === 'granted') {
                        this.subscribeToPushNotifications();
                        alert('Push notifications enabled!');
                    } else {
                        document.getElementById('notificationToggle').checked = false;
                        alert('Please allow notifications in your browser settings.');
                    }
                } else {
                    // Disable notifications
                    console.log('Notifications disabled');
                    if (this.userId) {
                        await this.db.collection('userPushSubscriptions').doc(this.userId).update({
                            subscribed: false
                        });
                    }
                }
            }

            // Send test notification
            async sendTestNotification() {
                if (!this.userId) {
                    alert('Please sign in to test notifications');
                    return;
                }

                try {
                    // Create a test notification
                    await this.db.collection('userMessages').add({
                        recipientId: this.userId,
                        senderId: 'system',
                        senderName: 'KCMC System',
                        title: 'Test Notification',
                        body: 'This is a test notification to verify your notification system is working properly.',
                        type: 'system',
                        read: false,
                        timestamp: firebase.firestore.FieldValue.serverTimestamp()
                    });
                    
                    alert('Test notification sent! Check your notification bell.');
                } catch (error) {
                    console.error('Error sending test notification:', error);
                    alert('Error sending test notification: ' + error.message);
                }
            }

            // Helper function to format time ago
            getTimeAgo(timestamp) {
                if (!timestamp) return 'Unknown time';
                
                let date;
                if (timestamp.seconds) {
                    date = new Date(timestamp.seconds * 1000);
                } else if (timestamp.toDate) {
                    date = timestamp.toDate();
                } else {
                    date = new Date(timestamp);
                }
                
                const now = new Date();
                const diffInSeconds = Math.floor((now - date) / 1000);
                
                if (diffInSeconds < 60) {
                    return 'Just now';
                } else if (diffInSeconds < 3600) {
                    const minutes = Math.floor(diffInSeconds / 60);
                    return `${minutes} minute${minutes > 1 ? 's' : ''} ago`;
                } else if (diffInSeconds < 86400) {
                    const hours = Math.floor(diffInSeconds / 3600);
                    return `${hours} hour${hours > 1 ? 's' : ''} ago`;
                } else if (diffInSeconds < 604800) {
                    const days = Math.floor(diffInSeconds / 86400);
                    return `${days} day${days > 1 ? 's' : ''} ago`;
                } else {
                    return date.toLocaleDateString();
                }
            }
        }

        // Initialize notification manager when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize notification manager
            window.notificationManager = new NotificationManager();
            
            // Register service worker for push notifications
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('/sw.js')
                    .then(function(registration) {
                        console.log('ServiceWorker registration successful with scope: ', registration.scope);
                    })
                    .catch(function(err) {
                        console.log('ServiceWorker registration failed: ', err);
                    });
            }
        });

        // Keep your existing animations and share functionality
        // Add subtle animations when elements come into view
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver(function(entries) {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                    
                    // Animate progress bars
                    const progressBars = entry.target.querySelectorAll('.progress-fill');
                    progressBars.forEach(bar => {
                        const width = bar.style.width;
                        bar.style.width = '0%';
                        setTimeout(() => {
                            bar.style.width = width;
                        }, 300);
                    });
                }
            });
        }, observerOptions);

        // Observe all cards for animation
        const cards = document.querySelectorAll('.card');
        cards.forEach(card => {
            card.style.opacity = '0';
            card.style.transform = 'translateY(20px)';
            card.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
            observer.observe(card);
        });

        // Animate impact numbers
        const impactNumbers = document.querySelectorAll('.impact-number');
        impactNumbers.forEach(number => {
            const target = parseInt(number.textContent);
            let current = 0;
            const increment = target / 50;
            const timer = setInterval(() => {
                current += increment;
                if (current >= target) {
                    number.textContent = target;
                    clearInterval(timer);
                } else {
                    number.textContent = Math.floor(current);
                }
            }, 30);
        });

        // Share story function
        function shareStory(childName) {
            if (navigator.share) {
                navigator.share({
                    title: `${childName}'s Story - KCMC Partners`,
                    text: `Read about ${childName}'s inspiring journey with KCMC Partners`,
                    url: window.location.href,
                })
                .then(() => console.log('Successful share'))
                .catch((error) => console.log('Error sharing:', error));
            } else {
                // Fallback for browsers that don't support Web Share API
                alert(`Share ${childName}'s story with your friends and family!`);
            }
        }

        // Newsletter subscription
        const subscribeBtn = document.querySelector('.btn');
        const emailInput = document.querySelector('input[type="email"]');
        
        if (subscribeBtn && emailInput) {
            subscribeBtn.addEventListener('click', function() {
                const email = emailInput.value;
                if (email && validateEmail(email)) {
                    // In a real app, you would send this to your server
                    alert('Thank you for subscribing to our updates!');
                    emailInput.value = '';
                } else {
                    alert('Please enter a valid email address.');
                }
            });
        }
        
        function validateEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }
    </script>
</body>
</html>