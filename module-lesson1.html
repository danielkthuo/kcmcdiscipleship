<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<title>Module 1 - Foundation to New Believer</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" />
<script src="jss/autosave.js"></script>
<style>
/* ======= FULL-WIDTH MOBILE-FRIENDLY DESIGN ======= */
:root {
  --primary-color: #2c3e50;
  --secondary-color: #3498db;
  --accent-color: #e74c3c;
  --light-color: #ecf0f1;
  --dark-color: #2c3e50;
  --font-main: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  --success-color: #2ecc71;
}

/* Reset and base */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  -webkit-tap-highlight-color: transparent;
}

html, body {
  width: 100%;
  height: 100%;
  overflow-x: hidden;
  font-family: var(--font-main);
  background: #f9f9f9;
  color: #333;
  scroll-behavior: smooth;
}

/* Header */
header {
  width: 100vw;
  background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
  color: white;
  padding: 1.4rem 1rem;
  text-align: center;
  position: relative;
}
header h1 {
  font-size: 1.4rem;
  margin-bottom: 0.3rem;
}
header .subtitle {
  font-size: 0.9rem;
  line-height: 1.4;
}
.progress-container {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 6px;
  background: rgba(255,255,255,0.2);
}
.progress-bar {
  height: 100%;
  width: 0%;
  background: var(--accent-color);
  transition: width 0.5s ease;
}

/* Content wrapper */
.container {
  width: 100vw;
  padding: 0 4vw 80px;
}

/* Buttons */
.btn {
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--secondary-color);
  color: white;
  padding: 14px;
  border-radius: 10px;
  border: none;
  font-weight: 600;
  text-decoration: none;
  font-size: 1rem;
  width: 100%;
  transition: 0.3s;
}
.btn:hover {
  background: var(--primary-color);
  transform: scale(1.02);
}
.btn-outline {
  background: transparent;
  border: 2px solid var(--secondary-color);
  color: var(--secondary-color);
}
.btn-outline:hover {
  background: var(--secondary-color);
  color: white;
}

/* Lesson navigation */
.lesson-nav {
  display: flex;
  gap: 10px;
  margin: 1.2rem 0;
}

/* Topic blocks */
.topic {
  background: white;
  border-radius: 12px;
  padding: 1.2rem;
  margin-bottom: 1.2rem;
  box-shadow: 0 3px 8px rgba(0,0,0,0.08);
  position: relative;
}
.topic h2 {
  font-size: 1.2rem;
  color: var(--primary-color);
  border-bottom: 2px solid var(--secondary-color);
  margin-bottom: 1rem;
  padding-bottom: 0.3rem;
}

/* Completion icon */
.topic-completion {
  position: absolute;
  top: 15px;
  right: 15px;
  width: 30px;
  height: 30px;
  border: 2px solid #ccc;
  border-radius: 50%;
  background: white;
  display: flex;
  align-items: center;
  justify-content: center;
}
.topic-completed {
  background: var(--success-color);
  border-color: var(--success-color);
  color: white;
}
.topic-completed::after {
  content: "‚úì";
  font-weight: bold;
}

/* Sub-sections */
.scripture, .key-point, .activity, .reflection {
  width: 100%;
  border-radius: 10px;
  padding: 1rem;
  margin: 1rem 0;
}
.scripture {
  background: #f8f9fa;
  border-left: 4px solid var(--secondary-color);
  font-style: italic;
}
.key-point {
  background: #e8f4fc;
  border-left: 4px solid var(--secondary-color);
}
.activity {
  background: #fff8e1;
  border-left: 4px solid #ffc107;
}
.reflection {
  background: #f0f7ff;
  border-left: 4px solid #4dabf7;
}
.reflection textarea {
  width: 100%;
  min-height: 100px;
  padding: 10px;
  border: 1px solid #ddd;
  border-radius: 8px;
  font-family: inherit;
}

/* Collapsible content */
.collapsible {
  width: 100%;
  background: #f1f1f1;
  color: var(--primary-color);
  border: none;
  text-align: left;
  padding: 14px;
  font-weight: 600;
  border-radius: 8px;
  margin-top: 10px;
}
.collapsible:after {
  content: '\002B';
  float: right;
}
.active:after {
  content: "\2212";
}
.content {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.3s ease-out;
  background: #fff;
  border-radius: 0 0 8px 8px;
  padding: 0 10px;
}

/* Cards & sections */
.assurance-card, .interactive-card, .activity-section {
  background: white;
  border-radius: 10px;
  padding: 1.2rem;
  margin: 1rem 0;
  box-shadow: 0 3px 8px rgba(0,0,0,0.06);
}

/* Bottom navigation */
.bottom-nav {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100vw;
  background: white;
  display: flex;
  justify-content: space-around;
  box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
  z-index: 999;
  padding: env(safe-area-inset-bottom) 0 10px;
}
.nav-item {
  flex: 1;
  text-align: center;
  color: #666;
  text-decoration: none;
  font-size: 0.75rem;
  padding: 6px 0;
}
.nav-item.active {
  color: var(--secondary-color);
  background: #e8f4fc;
  border-radius: 8px;
}
.nav-icon {
  display: block;
  font-size: 1.3rem;
}

/* Footer */
footer {
  width: 100vw;
  background: var(--dark-color);
  color: white;
  text-align: center;
  padding: 1rem;
  font-size: 0.85rem;
  border-radius: 0;
  margin-top: 1.5rem;
}

/* Mobile adjustments */
@media (max-width: 600px) {
  h1 { font-size: 1.3rem; }
  .btn { font-size: 0.9rem; padding: 12px; }
  .topic h2 { font-size: 1.1rem; }
  .reflection textarea { min-height: 120px; }
}
</style>
</head>
<body>
    <header>
        <div class="header-content">
            <h1>MODULE 1: FOUNDATION TO NEW BELIEVER</h1>
            <p class="subtitle">The 5 Assurances of a Christian-Understanding the foundational truths of Christianity and steps to grow in faith</p>
        </div>
        <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
    </header>
    
    <div class="container">
        <div class="lesson-nav">
            <a href="index.html" class="btn btn-outline">Back to Main</a>
            <a href="module-lesson2.html" class="btn">Next Lesson</a>
        </div>
        
        <div class="topic" id="topic1">
            <div class="topic-completion" id="topic1Completion"></div>
            <h2>Topic 1: The Five Assurances</h2>
            <p><strong>Objective:</strong> To help new believers anchor their faith in unchanging biblical truths that offer spiritual confidence and security.</p>
            
            <div class="scripture">
                <p><strong>John 5:24</strong> - "Very truly I tell you, whoever hears my word and believes him who sent me has eternal life and will not be judged but has crossed over from death to life."</p>
            </div>
            
            <h3>The Five Assurances:</h3>
            
            <!-- Assurance of Salvation Card -->
            <div class="assurance-card">
                <h4>1. Assurance of Salvation</h4>
                <p><strong>1 John 5:11-13</strong> - "God has given us eternal life... whoever has the Son has life."</p>
                <p><strong>Key Point:</strong> Salvation is a gift received by grace through faith, not by works (Eph 2:8-9).</p>
                
                <button class="collapsible">More Details + Reflection</button>
                <div class="content">
                    <div class="key-point">
                        <p><strong>Application:</strong> Help learners understand they are saved the moment they believe in Christ‚Äîthis is the foundation of their spiritual journey.</p>
                       <p><strong>Make it clear that:</strong></p>
<ul>
  <li>
    Salvation is not about a list of steps we must follow to earn salvation. 
    Yes, Christians should be baptized. Yes, Christians should publicly confess Christ as Savior. 
    Yes, Christians should practice good works and obey God. 
    However, these are not steps to salvation ‚Äî they are results of salvation.
  </li>
  <li>
    Salvation is not about following steps. It is about receiving Christ as Savior and recognizing that He has done all the work for us.
  </li>
  <li>
    God requires one step of us ‚Äî receiving Jesus Christ as our Savior from sin and fully trusting in Him alone as the way of salvation.
  </li>
  <li>
    <strong>Why We Need Salvation:</strong> Romans 3:23 ‚Äî Sin separates us from God, who is holy and just. 
    Because of sin, we are spiritually dead and unable to earn or deserve a right standing with Him on our own.
  </li>
  <li>
    <strong>How to Receive Salvation:</strong> ABC (Admit, Believe, Commit)
  </li>
</ul>

                    </div>
                    
                    <div class="reflection">
                        <h4>Reflection Questions:</h4>
                        <p>Do I truly believe that salvation is a gift, not something I earn?</p>
                        <textarea placeholder="Type your reflection here..."></textarea>
                        <p>When doubts arise, where do I turn for assurance?</p>
                        <textarea placeholder="Type your reflection here..."></textarea>
                    </div>
                </div>
            </div>
            
            <!-- Assurance of Answered Prayer Card -->
            <div class="assurance-card">
                <h4>2. Assurance of Answered Prayer</h4>
                <p>
                  The assurance of answered prayer comes from knowing that God hears and answers prayers 
                  when they align with His will and are prayed in faith.
                </p>
                <p><strong>John 16:24</strong> - "Ask and you will receive, and your joy will be complete."</p>
                <p><strong>Key Point:</strong> God hears and answers prayers made in Jesus' name, aligned with His will.</p>
                
                <button class="collapsible">More Details + Reflection</button>
                <div class="content">
                  <div class="key-point">
                    <ul>
                      <li>
                        <strong>Key Point:</strong> God hears and answers prayers made in Jesus' name, aligned with His will.
                      </li>
                      <li>
                        Jesus was instructing His disciples in these words just before He was crucified. 
                        He was preparing them for a new level of relationship with God, 
                        where they would pray directly to the Father in His name.
                      </li>
                      <li>
                        <strong>"Ask and you will receive"</strong> ‚Äî He was inviting us to come boldly to God in prayer.
                      </li>
                      <li>
                        <strong>"In My name"</strong> ‚Äî Not just reciting a phrase as a formula, 
                        but praying in accordance with who Jesus is and according to His purposes, 
                        rather than our own desires.
                      </li>
                      <li>
                        <strong>"Your joy will be complete"</strong> ‚Äî Because answered prayer brings deep spiritual joy 
                        as a reminder that God is active and cares for us.
                      </li>
                      <li>
                        <strong>Encouragement:</strong> "You don't need to have perfect prayers to receive powerful answers. 
                        Simply come to God with a willing heart, trusting He sees you, loves you, and replies."
                      </li>
                      <li>
                        <strong>Application:</strong> Encourage confidence in your prayer life ‚Äî pray boldly and consistently.
                      </li>
                      <li>
                        <strong>1 John 5:14‚Äì15 (NIV):</strong> "This is the confidence we have in approaching God: 
                        that if we ask anything according to His will, He hears us. 
                        And if we know that He hears us‚Äîwhatever we ask‚Äîwe know that we have what we asked of Him."
                      </li>
                    </ul>

                    <h4 class="mt-4">How Prayer Is Answered</h4>
                    <ul>
                      <li>Immediately at times ‚Äî <strong>Isaiah 65:24</strong></li>
                      <li>Delayed at times ‚Äî <strong>Luke 18:7</strong></li>
                      <li>Different from our desires ‚Äî <strong>2 Corinthians 12:8‚Äì9</strong></li>
                      <li>Beyond our expectations ‚Äî <strong>Ephesians 3:20</strong></li>
                    </ul>
                  </div>

                  <div class="reflection">
                    <h4 class="mt-4">Reflection Questions:</h4>
                    <p>Do I approach prayer expecting God to answer?</p>
                    <textarea placeholder="Type your reflection here..."></textarea>

                    <p>How can I align my prayers more with God's heart?</p>
                    <textarea placeholder="Type your reflection here..."></textarea>
                  </div>
                </div>
            </div>
            
            <!-- Assurance of Victory Over Sin Card -->
            <div class="assurance-card">
                <h4>3. Assurance of Victory Over Sin</h4>
                <p><strong>1 Corinthians 10:13</strong> - "God is faithful... He will provide a way out so you can endure it."</p>
                <p><strong>Key Point:</strong> No temptation is too strong; God provides strength and escape.</p>
                
                <button class="collapsible">More Details + Reflection</button>
                <div class="content">
                    <div class="key-point">
                        <p><strong>Application:</strong> Emphasize patience with self‚Äîspiritual growth is a process. Stay rooted in God's Word and connected to community.</p>
                    </div>
                    
                    <div class="reflection">
                        <h4>Reflection Questions:</h4>
                        <p>What sin or temptation do you find most challenging?</p>
                        <textarea placeholder="Type your reflection here..."></textarea>
                        <p>What "way of escape" has God shown you in the past?</p>
                        <textarea placeholder="Type your reflection here..."></textarea>
                    </div>
                </div>
            </div>
            
            <!-- Assurance of Forgiveness Card -->
            <div class="assurance-card">
                <h4>4. Assurance of Forgiveness</h4>
                <p><strong>1 John 1:9</strong> ‚Äì "If we confess our sins, He is faithful and just to forgive..."</p>
                <p>
                  Assurance of forgiveness is being confident and at peace in your heart that God has forgiven 
                  all of your sins because you have placed your faith in Jesus Christ. You can live without guilt 
                  or fear anymore ‚Äî you're free, cleansed, and loved by God.
                </p>

                <button class="collapsible">More Details + Reflection</button>
                <div class="content">
                  <div class="key-point">
                    <ul>
                      <li><strong>Key Point:</strong> Confession brings cleansing; guilt doesn't have to linger.</li>
                      <li><strong>Application:</strong> Teach that God's forgiveness is complete freedom that comes through honesty and grace, not shame.</li>
                    </ul>

                    <h5 class="mt-3">‚úÖ Conclusion:</h5>
                    <p>
                      Having the promise of forgiveness is a huge part of what it means to be a Christian. 
                      It means you can have confidence that God has forgiven you because you believe in Jesus ‚Äî 
                      that confidence comes from:
                    </p>
                    <br>
                    <ul>
                      <li>God's Word (what the Bible promises)</li>
                      <li>Jesus' completed work on the cross</li>
                      <li>The Holy Spirit residing in you</li>
                    </ul>

                    <p>
                      With this assurance, you have no need for fear or doubting ‚Äî you can live in peace, joy, 
                      and confidence knowing you are truly forgiven and loved by God.
                    </p>
                  </div>

                  <div class="reflection mt-4">
                    <h5>Reflection Question:</h5>
                    <p>Am I holding onto guilt God has already forgiven?</p>
                    <textarea placeholder="Type your reflection here..."></textarea>
                  </div>
                </div>
            </div>
            
            <!-- Assurance of Guidance Card -->
            <div class="assurance-card">
                <h4>5. Assurance of Guidance</h4>
                <p><strong>Proverbs 3:5‚Äì6</strong> ‚Äì "Trust in the Lord... and He will make your paths straight."</p>
                <p><strong>Key Point:</strong> God desires to lead His children daily ‚Äî guidance flows from trust and surrender.</p>
                <p><strong>Application:</strong> Build a habit of seeking God in decisions, big or small. Lean not on your own understanding.</p>

                <button class="collapsible">More Details + Reflection</button>
                <div class="content">
                  <div class="key-point">
                    <h5 class="mt-3">The Three Commands:</h5>

                    <p><strong>üîπ 1. Trust in the Lord with all your heart</strong></p>
                    <p><strong>üëâ Meaning:</strong> Trust God completely. Don't just trust Him part of the time ‚Äî trust Him with everything in your life: your school, friends, family, and your future.</p>
                    <p><strong>üìå Example:</strong> When things feel confusing, say, "God, I trust You to help me through this."</p>
                    <p><strong>üß† Teen Life Example:</strong> If you're unsure which subject to pick for next year, or whether a friendship is worth keeping, trust that God sees all sides and will lead you if you trust Him.</p>

                    <p class="mt-3"><strong>üîπ 2. Don't lean on your own understanding</strong></p>
                    <p><strong>üëâ Meaning:</strong> Don't think you know it all. Your thoughts and feelings can sometimes be wrong. God sees everything, even if you don't. Do not rely only on your own ideas.</p>
                    <p><strong>üìå Example:</strong> Before making a big decision, don't just go with your gut ‚Äî ask God what He thinks.</p>
                    <p><strong>üß† Teen Life Example:</strong> You might think, "Everyone is cheating on tests, so it must be okay," but God's way is different. Instead of following what seems right to others, seek what God says is right.</p>

                    <p class="mt-3"><strong>üîπ 3. In all your ways acknowledge Him</strong></p>
                    <p><strong>üëâ Meaning:</strong> Include God in everything ‚Äî your school work, talents, friends, activities, hobbies, and choices. Don't just talk to God at church; take Him with you everywhere.</p>
                    <p><strong>üìå Example:</strong> Before you send that text, say, "God, is this the right thing to do?"</p>
                    <p><strong>üß† Teen Life Example:</strong> Before posting on social media, ask yourself, "Would this PLEASE God?" That's acknowledging Him in all your ways.</p>

                    <div class="scripture mt-4">
                      <h5>‚ú® The Promise:</h5>
                      <p>"...and He will direct your paths."</p>
                      <p>If you trust Him, don't rely on just yourself, and acknowledge Him, He promises to guide your life ‚Äî step by step.</p>
                    </div>
                  </div>

                  <div class="reflection mt-4">
                    <h5>Reflection Questions:</h5>
                    <p>Do I trust God with my future, or lean on my own plans?</p>
                    <textarea placeholder="Type your reflection here..."></textarea>
                    <p>How do I make space to hear His voice in daily life?</p>
                    <textarea placeholder="Type your reflection here..."></textarea>
                  </div>
                </div>
            </div>
            
            <!-- Activity Section -->
            <div class="activity-section">
                <h3 class="section-title">‚ú® Activity Ideas</h3>
                <p class="intro-text">Help your learners engage with Scripture through fun and interactive faith-building activities.</p>

                <!-- Digital Matching Game -->
                <div class="interactive-card">
                    <h4><i class="bi bi-puzzle text-primary"></i> Digital Matching Game</h4>
                    <p>Match each Bible verse with its correct assurance theme. Strengthen memory and connection with God's Word!</p>
                    <button class="btn-start" id="startMatchingGame">üéÆ Start Matching Game</button>

                    <div id="matchingGameContainer" class="matching-area" style="display:none;">
                        <h5 class="sub-title">üß© Matching Game</h5>
                        <p class="instruction">Click one verse and one theme to make a match.</p>
                        <div class="game-grid">
                            <div class="list" id="versesList"></div>
                            <div class="list" id="themesList"></div>
                        </div>
                        <div class="scoreboard mt-2">
                            <strong>Matches:</strong> <span id="score">0</span>/<span id="total">0</span>
                        </div>
                    </div>
                </div>

                <!-- Scavenger Hunt -->
                <div class="interactive-card scavenger">
                    <h4><i class="bi bi-map text-success"></i> Scavenger Hunt</h4>
                    <p>Take your group on a spiritual adventure! Set up stations with clues and Bible-based challenges.</p>
                    <ul>
                        <li><strong>Station Setup:</strong> Choose different locations around your venue ‚Äî each with a clue about an Assurance or Bible truth.</li>
                        <li><strong>Example Locations:</strong>
                            <ul>
                                <li>üìñ A Bible on a table ‚Äî The Word of God</li>
                                <li>‚úùÔ∏è A cross ‚Äî Salvation</li>
                                <li>üôè A prayer corner ‚Äî God's Presence</li>
                            </ul>
                        </li>
                        <li><strong>Tasks:</strong> Each station should include an action or reflection, such as:
                            <ul>
                                <li>Recite a verse about God's love ‚ù§Ô∏è</li>
                                <li>Explain what the Assurance of Victory means to you üïäÔ∏è</li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="lesson-nav">
            <a href="index.html" class="btn btn-outline">Back to Main</a>
            <a href="module-lesson2.html" class="btn">Next Lesson</a>
        </div>
    </div>
    
    <!-- Bottom Navigation Bar -->
    <div class="bottom-nav">
        <a href="index.html" class="nav-item">
            <span class="nav-icon">üè†</span>
            <span>Home</span>
        </a>
        <a href="progress.html" class="nav-item">
            <span class="nav-icon">üìä</span>
            <span>Progress</span>
        </a>
        <a href="lessons.html" class="nav-item active">
            <span class="nav-icon">üìö</span>
            <span>Lessons</span>
        </a>
        <a href="resources.html" class="nav-item">
            <span class="nav-icon">üîñ</span>
            <span>Resources</span>
        </a>
        <a href="profile.html" class="nav-item">
            <span class="nav-icon">üë§</span>
            <span>Profile</span>
        </a>
    </div>
    
    <footer>
        <p>Pathlight Discipleship Curriculum &copy; 2023 | KCMC</p>
        <p>Lit to Lead. Rooted to Grow.</p>
    </footer>

    <script>
        // Progress tracking
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize progress bar
            updateProgressBar();
            
            // Topic completion toggle
            const completionElements = document.querySelectorAll('.topic-completion');
            completionElements.forEach(element => {
                element.addEventListener('click', function() {
                    this.classList.toggle('topic-completed');
                    updateProgressBar();
                    saveProgress();
                });
                
                // Add touch feedback
                element.addEventListener('touchstart', function() {
                    this.style.transform = 'scale(0.95)';
                });
                
                element.addEventListener('touchend', function() {
                    this.style.transform = 'scale(1)';
                });
            });
            
            // Collapsible sections
            const coll = document.querySelectorAll('.collapsible');
            coll.forEach(item => {
                item.addEventListener('click', function() {
                    this.classList.toggle('active');
                    const content = this.nextElementSibling;
                    if (content.style.maxHeight) {
                        content.style.maxHeight = null;
                    } else {
                        content.style.maxHeight = content.scrollHeight + 'px';
                    }
                });
            });
            
            // Matching game button
            document.getElementById('startMatchingGame').addEventListener('click', function() {
                const container = document.getElementById('matchingGameContainer');
                if (container.style.display === 'none') {
                    container.style.display = 'block';
                    initializeMatchingGame();
                } else {
                    container.style.display = 'none';
                }
            });
            
            // Load saved progress
            loadProgress();
            
            // Initialize matching game if needed
            function initializeMatchingGame() {
                const pairs = [
                    {verse: 'Romans 8:38-39 ‚Äî Nothing separates us from God\'s love', theme: 'God\'s Unfailing Love'},
                    {verse: 'John 10:28 ‚Äî I give them eternal life', theme: 'Assurance of Salvation'},
                    {verse: 'Philippians 4:13 ‚Äî I can do all things through Christ', theme: 'Confidence & Strength'},
                    {verse: 'Romans 8:37 ‚Äî More than conquerors', theme: 'Assurance of Victory'},
                    {verse: 'Hebrews 13:5 ‚Äî I will never leave you', theme: 'God\'s Presence'}
                ];

                const versesList = document.getElementById('versesList');
                const themesList = document.getElementById('themesList');
                const scoreSpan = document.getElementById('score');
                const totalSpan = document.getElementById('total');

                let state = {selectedVerse: null, selectedTheme: null, correct: 0, total: pairs.length};
                totalSpan.textContent = state.total;

                function shuffle(arr){ 
                    for(let i=arr.length-1;i>0;i--){
                        const j=Math.floor(Math.random()*(i+1));
                        [arr[i],arr[j]]=[arr[j],arr[i]];
                    } 
                    return arr; 
                }

                function renderBoard(){
                    versesList.innerHTML = '';
                    themesList.innerHTML = '';
                    const verses = shuffle([...pairs.map(p=>p.verse)]);
                    const themes = shuffle([...pairs.map(p=>p.theme)]);
                    
                    verses.forEach(v => {
                        const el = document.createElement('div');
                        el.className = 'item';
                        el.textContent = v;
                        el.onclick = () => selectItem(el, 'verse');
                        versesList.appendChild(el);
                    });
                    
                    themes.forEach(t => {
                        const el = document.createElement('div');
                        el.className = 'item';
                        el.textContent = t;
                        el.onclick = () => selectItem(el, 'theme');
                        themesList.appendChild(el);
                    });
                }

                function selectItem(el, type){
                    if(el.classList.contains('correct')) return;
                    document.querySelectorAll(type === 'verse' ? '#versesList .item' : '#themesList .item').forEach(i => i.classList.remove('selected'));
                    el.classList.add('selected');
                    if(type === 'verse') state.selectedVerse = el.textContent; 
                    else state.selectedTheme = el.textContent;
                    
                    if(state.selectedVerse && state.selectedTheme) checkMatch();
                }

                function checkMatch(){
                    const match = pairs.find(p => p.verse === state.selectedVerse && p.theme === state.selectedTheme);
                    const vEl = [...document.querySelectorAll('#versesList .item')].find(i => i.textContent === state.selectedVerse);
                    const tEl = [...document.querySelectorAll('#themesList .item')].find(i => i.textContent === state.selectedTheme);
                    
                    if(match){
                        vEl.classList.add('correct');
                        tEl.classList.add('correct');
                        state.correct++;
                        scoreSpan.textContent = state.correct;
                    }
                    
                    vEl.classList.remove('selected');
                    tEl.classList.remove('selected');
                    state.selectedVerse = null;
                    state.selectedTheme = null;
                }

                renderBoard();
            }
        });
        
        function updateProgressBar() {
            const completedTopics = document.querySelectorAll('.topic-completed').length;
            const totalTopics = document.querySelectorAll('.topic-completion').length;
            const progressPercentage = (completedTopics / totalTopics) * 100;
            
            document.getElementById('progressBar').style.width = progressPercentage + '%';
        }
        
        function saveProgress() {
            const topics = [];
            document.querySelectorAll('.topic-completion').forEach((element, index) => {
                topics.push({
                    id: index,
                    completed: element.classList.contains('topic-completed')
                });
            });
            
            localStorage.setItem('lesson1Progress', JSON.stringify(topics));
        }
        
        function loadProgress() {
            const savedProgress = localStorage.getItem('lesson1Progress');
            if (savedProgress) {
                const topics = JSON.parse(savedProgress);
                topics.forEach(topic => {
                    const element = document.querySelectorAll('.topic-completion')[topic.id];
                    if (element && topic.completed) {
                        element.classList.add('topic-completed');
                    }
                });
                updateProgressBar();
            }
        }
    </script>
</body>
</html>
